<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>readmeへるぷみー</title>
    <link rel="stylesheet" href="./css/output.css">
    <!-- <script src="js/jquery-2.1.3.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <header class="text-gray-600 body-font">
    <div class="container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center">
        <nav class="flex lg:w-2/5 flex-wrap items-center text-base md:ml-auto">

        </nav>
        <a class="flex order-first lg:order-none lg:w-1/5 title-font font-medium items-center text-gray-900 lg:items-center lg:justify-center mb-4 md:mb-0">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-10 h-10 text-white p-2 bg-indigo-500 rounded-full" viewBox="0 0 24 24">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
        </svg>
        <span class="ml-3 text-xl">readmeへるぷみー
        </span>
        </a>
        <div class="lg:w-2/5 inline-flex lg:justify-end ml-5 lg:ml-0">
        </div>
    </div>
    </header>
    <main>
        <section class="text-gray-600 body-font relative">
            <div class="container px-5 py-10 mx-auto">
                <div class="flex flex-col text-center w-full mb-12">
                <h1 class="sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-900">もしかして「苦労した点」探しで消耗してるの？</h1>
                <p class="lg:w-2/3 mx-auto leading-relaxed text-base">困ったことをメモして今後に活かすツールってなかったのよね</p>
                </div>
                <div class="lg:w-1/2 md:w-2/3 mx-auto">
                <div class="flex flex-wrap -m-2">
                    <div class="p-2 w-1/2">
                    <div class="relative">
                        <label for="key" class="leading-7 text-sm text-gray-600">TITLE（概要）</label>
                        <input type="text" id="key" name="TITLE" class="w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">

                        <!-- <label for="name" class="leading-7 text-sm text-gray-600">Name</label> -->
                        <!-- <input type="text" id="name" name="name" class="w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"> -->
                    </div>
                    </div>
                    <div class="p-2 w-1/2">
                    <div class="relative">
                        <label for="url" class="leading-7 text-sm text-gray-600">URL（リンク）</label>
                        <input type="url" id="url" name="URL" class="w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
                    </div>
                    </div>
                    <div class="p-2 w-full">
                    <div class="relative">
                        <label for="memo" class="leading-7 text-sm text-gray-600">DETAIL（詳細）</label>
                        <textarea id="memo" name="DETAIL" class="w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 h-32 text-base outline-none text-gray-700 py-1 px-3 resize-none leading-6 transition-colors duration-200 ease-in-out"></textarea>
                    </div>
                    </div>
                    <div class="flex justify-center p-2 w-full">
                    <button id="save" class="flex mx-auto text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg">Save</button>
                    <button id="clear" class="flex mx-auto text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg">Clear</button>
                    </div>
                </div>
                </div>
            </div>
            </section>
        <section>
            <section class="text-gray-600 body-font">
                <div class="container px-5 py-8 mx-auto">
                <div class="lg:w-2/3 w-full mx-auto overflow-auto">
                <table class="table-auto w-full text-left whitespace-no-wrap">
                    <thead>
                    <tr>
                        <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100 rounded-tl rounded-bl">DATE</th>
                        <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100">TITLE</th>
                        <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100">DETAIL</th>
                        <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100">URL</th>
                        <th class="w-10 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100 rounded-tr rounded-br"></th>
                    </tr>
                    </thead>
                    <tbody id="list">
                    <!-- <tr>
                        <td class="px-4 py-3">Start</td>
                        <td class="px-4 py-3">5 Mb/s</td>
                        <td class="px-4 py-3">15 GB</td>
                        <td class="px-4 py-3 text-lg text-gray-900">Free</td>
                        <td class="w-10 text-center">
                        <button class="delete-btn text-sm text-white bg-indigo-500 border-0 py-2 px-6 mr-2 focus:outline-none hover:bg-indigo-600 rounded">Delete</button>
                        </td>
                    </tr> -->
                    </tbody>
                </table>
                </div>
                <div class="flex justify-center pl-4 mt-10 mb-10 lg:w-2/3 w-full mx-auto">
                <button id="kakidashi" class="text-white bg-orange-500 border-0 py-3 px-10 focus:outline-none hover:bg-red-600 rounded">readme貼り付けのためにコピる</button>
                </div>
                <div class="flex flex-col text-center w-full mb-12">
                    <p class="font-black lg:w-2/3 mx-auto leading-relaxed text-base">↓貼り付け前に確認できるよ↓</p>
                    <p class="lg:w-2/3 mx-auto leading-relaxed text-base">----------------------------------------------------</p>
                    <p id="readme"></p>
                    </div>
            </div>
            </section>
        </section>
    </main>
<footer>
    <footer class="text-gray-600 body-font">

        <div class="bg-gray-100">
            <div class="container px-5 py-6 mx-auto flex items-center sm:flex-row flex-col">
            <a class="flex title-font font-medium items-center md:justify-start justify-center text-gray-900">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-10 h-10 text-white p-2 bg-indigo-500 rounded-full" viewBox="0 0 24 24">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                </svg>
                <span class="ml-3 text-xl">Tailblocks</span>
            </a>
            <p class="text-sm text-gray-500 sm:ml-6 sm:mt-0 mt-4">© 2020 Tailblocks —
                <a href="https://twitter.com/knyttneve" rel="noopener noreferrer" class="text-gray-600 ml-1" target="_blank">@knyttneve</a>
            </p>
            <span class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start">
            </span>
            </div>
        </div>
        </footer>
    </footer>
    <script>
    //1.Save クリックイベント
    const currentDate = new Date();
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth() + 1;
    const date = currentDate.getDate();
    const dayNum = currentDate.getDay();
    const weekday = ["日","月","火","水","木","金","土"];
    const day = weekday[dayNum];

    $("#save").on("click",function(){
        const key=$("#key").val();
        const value=$("#memo").val();
        const url=$("#url").val();

        const currentDate = new Date();
        const month = currentDate.getMonth() + 1;
        const day = currentDate.getDate();
        const hours = currentDate.getHours();
        const minutes = currentDate.getMinutes();
        const nichiji = `${month}/${day} ${hours}:${minutes}`;

        const memoAll = {
            dateTime: nichiji,
            value: value,
            url: url
        };

        localStorage.setItem(key, JSON.stringify(memoAll));

        const html=`
        <tr>
            <td>${nichiji}</td>
            <th class="topic">${key}</th>
            <td>${value}</td>
            <td>${url}</td>
            <td class="w-10 text-center">
                <button class="delete-btn text-sm text-white bg-indigo-500 border-0 py-2 px-6 mr-2 focus:outline-none hover:bg-indigo-600 rounded">Delete</button>
            </td>
        </tr>
        `
        $("#list").append(html)
        $("#key").val("");
        $("#memo").val("");
        $("#url").val("");
    });

    //2.clear クリックイベント
    $("#clear").on("click",function(){
        localStorage.clear();
        alert("全部消えてしまいますが、本当にクリアしますか？");
        $("#list").empty();
    });

    // 3.削除ボタン クリックイベント
    $("#list").on("click", ".delete-btn", function() {
        const row = $(this).closest("tr");
        const key = row.find("th").text();
        alert("この項目を削除しますか？");
        localStorage.removeItem(key);
        row.remove();
    });

    //4.ページ読み込み：保存データ取得表示
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        const memoAll = JSON.parse(localStorage.getItem(key));

        const nichiji = memoAll.dateTime;

        const html = `
        <tr>
            <td>${nichiji}</td>
            <th>${key}</th>
            <td>${memoAll.value}</td>
            <td>${memoAll.url}</td>
            <td class="w-10 text-center">
                <button class="delete-btn text-sm text-white bg-indigo-500 border-0 py-2 px-6 mr-2 focus:outline-none hover:bg-indigo-600 rounded">Delete</button>
            </td>
        </tr>
        `
        $("#list").append(html);
        }

    //5.コピペしてreadme貼り付け準備
    $("#kakidashi").on("click",function(){
        for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        const memoAll = JSON.parse(localStorage.getItem(key));

        const readme =`
            <div class="flex flex-col text-left w-full mb-12">
            ##苦労した点<br>
            - 概要：${key}<br>
            -- 詳細：${memoAll.value}<br>
            -- 参考URL：${memoAll.url}<br>
            <br>
            </div>
        `;
        $("#readme").append(readme);
        }
    });


    </script>
</body>
</html>